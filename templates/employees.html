<!-- FILE: templates/employees.html -->
{% extends "base.html" %}
{% block content %}
<h2>Employees</h2>
<div class="grid-2">
  <div>
    <h3>Add employee</h3>
    <form method="post" action="{{ url_for('add_employee') }}" class="form">
      <label>Name <input name="name" required /></label>
      <label>Email <input name="email" type="email" required /></label>
      <label>Phone <input name="phone" /></label>
      <label>Position <input name="position" /></label>
      <label>Department
        <select name="department_id">
          <option value="">-- Choose --</option>
          {% for d in depts %}
          <option value="{{ d.department_id }}">{{ d.department_name }}</option>
          {% endfor %}
        </select>
      </label>
      <label>Salary <input name="salary" type="number" step="0.01" value="0" /></label>
      <button class="btn primary">Add</button>
    </form>
  </div>
  <div>
    <h3>All employees</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Dept</th><th>Position</th><th>Salary</th><th>Actions</th></tr></thead>
      <tbody>
        {% for e in items %}
        <tr>
          <td>{{ e.employee_id }}</td>
          <td>{{ e.name }}</td>
          <td>{{ e.email }}</td>
          <td>{{ e.department_name or '-' }}</td>
          <td>{{ e.position or '-' }}</td>
          <td>â‚¹ {{ '%.2f'|format(e.salary or 0) }}</td>
          <td>
            <details>
              <summary>Edit</summary>
              <form method="post" action="{{ url_for('update_employee', employee_id=e.employee_id) }}" class="form inline">
                <input name="name" value="{{ e.name }}" />
                <input name="phone" value="{{ e.phone or '' }}" />
                <input name="position" value="{{ e.position or '' }}" />
                <select name="department_id">
                  <option value="">--</option>
                  {% for d in depts %}
                  <option value="{{ d.department_id }}" {% if e.department_id==d.department_id %}selected{% endif %}>{{ d.department_name }}</option>
                  {% endfor %}
                </select>
                <input name="salary" type="number" step="0.01" value="{{ e.salary or 0 }}" />
                <button class="btn">Save</button>
              </form>
            </details>
            <form method="post" action="{{ url_for('delete_employee', employee_id=e.employee_id) }}" onsubmit="return confirm('Delete employee?')">
              <button class="btn danger">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
